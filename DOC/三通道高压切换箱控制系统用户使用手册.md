# 三通道高压切换箱控制系统 用户使用手册

**产品型号**：Three-channel controller_v3.0  
**系统版本**：v3.0  
**手册版本**：v1.0  
**编写日期**：2025年1月  

---

## ? 目录

1. [产品简介](#1-产品简介)
2. [设备外观与接口](#2-设备外观与接口)
3. [开机与自检](#3-开机与自检)
4. [主界面说明](#4-主界面说明)
5. [通道切换操作](#5-通道切换操作)
6. [按键操作指南](#6-按键操作指南)
7. [报警与故障处理](#7-报警与故障处理)
8. [日志查看功能](#8-日志查看功能)
9. [日常维护](#9-日常维护)
10. [常见问题解答](#10-常见问题解答)

---

## 1. 产品简介

### 1.1 产品概述

三通道高压切换箱控制系统是一款智能化的工业控制设备，主要用于高压电路的安全切换控制。设备具有三个独立的高压通道，同时只能开启一个通道，确保系统安全运行。

### 1.2 主要功能

- **三通道切换**：支持三路高压通道的独立控制
- **安全互锁**：确保同时只有一个通道处于工作状态
- **实时监控**：显示通道状态、温度信息和系统状态
- **故障报警**：15种异常类型检测，及时发现问题
- **数据记录**：自动记录操作日志和故障信息
- **自动保护**：温度过高、电源异常等情况下自动保护

### 1.3 技术特点

- **双重保护**：每个通道配备两路继电器，提高可靠性
- **智能显示**：2.42寸OLED屏幕，清晰显示设备状态
- **温度监控**：三路温度传感器，自动风扇调速
- **看门狗保护**：系统故障时自动重启恢复
- **大容量存储**：可保存24万条操作和故障记录

---

## 2. 设备外观与接口

### 2.1 前面板

#### 2.1.1 显示屏
- **2.42寸OLED显示屏**：显示系统状态、通道信息和温度数据
- **分辨率**：128×64像素，支持中英文显示

#### 2.1.2 操作按键
- **KEY1**：主功能键（查看日志、Flash状态）
- **KEY2**：辅助功能键（系统测试功能）

#### 2.1.3 状态指示
- **ALARM指示**：报警状态指示灯
- **电源指示**：设备通电状态

### 2.2 接线端子

#### 2.2.1 电源接口
| 接口名称 | 说明 | 接线要求 |
|----------|------|----------|
| DC24V+ | 24V直流电源正极 | 使用2.5mm?导线 |
| DC24V- | 24V直流电源负极 | 使用2.5mm?导线 |
| GND | 系统接地 | 可靠接地 |

#### 2.2.2 通道控制接口
| 接口名称 | 说明 | 信号类型 |
|----------|------|----------|
| K1_EN | 通道1使能信号 | 低电平=开启 |
| K2_EN | 通道2使能信号 | 低电平=开启 |
| K3_EN | 通道3使能信号 | 低电平=开启 |

#### 2.2.3 继电器输出接口
| 接口名称 | 说明 | 输出类型 |
|----------|------|----------|
| K1_1_ON, K1_2_ON | 通道1继电器控制 | 低电平=动作 |
| K2_1_ON, K2_2_ON | 通道2继电器控制 | 低电平=动作 |
| K3_1_ON, K3_2_ON | 通道3继电器控制 | 低电平=动作 |

#### 2.2.4 状态反馈接口
| 接口名称 | 说明 | 信号类型 |
|----------|------|----------|
| K1_1_STA~K3_2_STA | 继电器状态反馈 | 高电平=闭合 |
| SW1_STA~SW3_STA | 接触器状态反馈 | 高电平=闭合 |

#### 2.2.5 监控接口
| 接口名称 | 说明 | 接线要求 |
|----------|------|----------|
| NTC1~NTC3 | 温度传感器接口 | 10KΩ NTC热敏电阻 |
| FAN_PWM | 风扇控制输出 | PWM信号输出 |

### 2.3 通信接口

#### 2.3.1 调试串口
- **USART3**：用于调试和日志输出
- **波特率**：115200
- **数据位**：8位
- **停止位**：1位
- **校验位**：无

---

## 3. 开机与自检

### 3.1 开机准备

#### 3.1.1 上电前检查
1. **电源检查**：确认24V直流电源正常
2. **接线检查**：确认所有接线正确无误
3. **接地检查**：确认系统接地良好
4. **安全检查**：确认高压部分已断电

#### 3.1.2 上电步骤
1. 连接24V电源
2. 观察显示屏是否正常点亮
3. 等待系统自检完成

### 3.2 自检流程

#### 3.2.1 启动画面（2秒）
设备上电后首先显示：
```
┌─────────────────────────────────────┐
│                                     │
│        三通道高压切换箱控制系统        │
│        Three-channel Controller     │
│               v3.0                  │
│                                     │
└─────────────────────────────────────┘
```

#### 3.2.2 自检进度（3秒）
显示自检进度条：
```
┌─────────────────────────────────────┐
│          System Self-Test           │
│                                     │
│         │
│             Progress: 85%           │
│                                     │
└─────────────────────────────────────┘
```

#### 3.2.3 自检步骤说明

**步骤1：期望状态识别（25%）**
- 检测哪个通道应该开启
- 根据K_EN信号判断期望状态

**步骤2：继电器状态检查（50%）**
- 检查继电器当前状态
- 如有错误自动纠正

**步骤3：接触器状态检查（75%）**
- 检查接触器反馈信号
- 确认与期望状态一致

**步骤4：温度安全检测（100%）**
- 检查三路温度传感器
- 确认温度在安全范围内

### 3.3 自检结果

#### 3.3.1 自检通过
显示"自检结果: 通过"，系统进入正常运行状态

#### 3.3.2 自检失败
- 显示"自检结果: 失败"
- 显示具体错误信息
- 系统将自动重启重新自检

---

## 4. 主界面说明

### 4.1 界面布局

正常运行时，显示屏分为三个区域：

```
┌─────────────────────────────────────┐
│            System Normal            │  ← 上部：系统状态
├─────────────────────────────────────┤
│  CH1:OFF   CH2:OFF   CH3:OFF       │  ← 中部：通道状态
├─────────────────────────────────────┤
│  T:28.3°C 28.1°C 27.9°C  Fan:Auto  │  ← 下部：温度信息
└─────────────────────────────────────┘
```

### 4.2 显示内容说明

#### 4.2.1 系统状态区域（上部）
显示当前系统运行状态：

| 显示内容 | 含义 | 说明 |
|----------|------|------|
| System Normal | 系统正常 | 无异常，正常运行 |
| A:EN冲突 | A类异常 | 多个通道同时使能 |
| B:K1_1 STA异常 | B类异常 | 继电器1状态异常 |
| K:NTC1 60.5C | K类异常 | 温度1超过60℃ |
| N:Step3 Fail | N类异常 | 自检第3步失败 |

#### 4.2.2 通道状态区域（中部）
显示三个通道的当前状态：

| 显示内容 | 含义 | 说明 |
|----------|------|------|
| CH1:OFF | 通道1关闭 | 通道处于关闭状态 |
| CH1:ON | 通道1开启 | 通道处于开启状态 |
| CH1:ERR | 通道1异常 | 通道状态异常 |

#### 4.2.3 温度信息区域（下部）
显示温度和风扇状态：

**温度显示格式**：
```
T:28.3°C 28.1°C 27.9°C
```
- 分别显示三路温度传感器数值
- 温度超过60℃时数值会闪烁

**风扇状态显示**：
| 显示内容 | 含义 | 说明 |
|----------|------|------|
| Fan:Auto | 自动模式 | 根据温度自动调节转速 |
| Fan:50% | 手动模式 | 固定50%转速运行 |
| Fan:OFF | 风扇关闭 | 温度较低时风扇停止 |

### 4.3 状态变化说明

#### 4.3.1 通道切换时
当外部控制信号改变时，显示屏会实时更新通道状态：
```
CH1:OFF → CH1:ON    (通道1开启)
CH2:ON → CH2:OFF    (通道2关闭)
```

#### 4.3.2 温度变化时
温度数值每秒更新一次：
```
T:28.3°C 29.1°C 28.5°C → T:28.5°C 29.3°C 28.7°C
```

#### 4.3.3 报警状态时
出现异常时，上部区域会显示报警信息：
```
System Normal → K:NTC1 60.5C
```

---

## 5. 通道切换操作

### 5.1 通道控制原理

#### 5.1.1 使能信号控制
通道开关由外部K_EN信号控制：
- **K1_EN=低电平**：通道1开启
- **K2_EN=低电平**：通道2开启
- **K3_EN=低电平**：通道3开启
- **K_EN=高电平**：对应通道关闭

#### 5.1.2 互锁保护
- 系统确保同时只有一个通道开启
- 开启新通道前会自动关闭其他通道
- 如检测到多路使能信号同时有效，会产生A类异常

### 5.2 通道切换步骤

#### 5.2.1 从通道1切换到通道2
1. 将K2_EN信号拉低（开启通道2）
2. 系统检测到切换请求
3. 系统先关闭通道1
4. 等待通道1完全关闭
5. 开启通道2
6. 确认通道2正常开启
7. 显示屏更新状态：CH1:OFF → CH2:ON

#### 5.2.2 关闭所有通道
1. 将所有K_EN信号拉高
2. 系统检测到关闭请求
3. 关闭当前开启的通道
4. 显示屏更新状态：CH1:ON → CH1:OFF

### 5.3 切换过程监控

#### 5.3.1 切换时间
- **继电器动作时间**：约500ms
- **状态确认时间**：约500ms
- **总切换时间**：约1秒

#### 5.3.2 切换状态反馈
系统通过以下方式确认切换结果：
- 继电器状态反馈信号
- 接触器状态反馈信号
- 显示屏状态更新

#### 5.3.3 切换异常处理
如果切换过程中出现异常：
- 系统会产生相应的报警信号
- 显示屏显示异常信息
- 记录异常日志

### 5.4 安全保护功能

#### 5.4.1 电源保护
- 检测到电源异常时，阻止通道切换
- 保持当前状态，避免误动作

#### 5.4.2 温度保护
- 温度超过60℃时产生报警
- 自动启动风扇降温

#### 5.4.3 状态监控
- 持续监控继电器和接触器状态
- 发现异常立即报警

---

## 6. 按键操作指南

### 6.1 按键功能概述

设备配备两个操作按键：

| 按键 | 主要功能 | 操作方式 |
|------|----------|----------|
| KEY1 | 日志查看、Flash状态 | 长按不同时间 |
| KEY2 | 系统测试功能 | 长按不同时间 |

### 6.2 KEY1操作说明

#### 6.2.1 查看历史日志（长按3秒）
1. **操作方法**：按住KEY1键3秒后松开
2. **操作提示**：按键按下期间显示倒计时
3. **执行结果**：通过串口输出历史日志记录

**输出示例**：
```
=== 日志系统输出 ===
总日志数: 15 条
存储健康度: 100%

--- 日志详情 ---
[1] 2025-01-07 12:40:43 | 系统启动
[2] 2025-01-07 12:40:43 | 引脚复位
[3] 2025-01-07 12:41:15 | 通道1开启
[4] 2025-01-07 12:41:28 | 通道1关闭
[5] 2025-01-07 12:41:30 | 通道2开启
...
```

#### 6.2.2 查看Flash状态（长按8秒）
1. **操作方法**：按住KEY1键8秒后松开
2. **操作提示**：按键按下期间显示倒计时
3. **执行结果**：显示Flash存储器详细状态

**输出示例**：
```
=== Flash状态报告 ===
芯片信息: W25Q128JV (16MB)
已用空间: 2.5KB (0.02%)
剩余空间: 15.99MB (99.98%)
日志条数: 158
健康度: 100%
预计寿命: >10年
```

### 6.3 KEY2操作说明

#### 6.3.1 日志读取测试（长按3秒）
1. **操作方法**：按住KEY2键3秒后松开
2. **功能说明**：测试Flash读取性能
3. **适用场景**：系统维护时检查存储器状态

#### 6.3.2 写入性能测试（长按8秒）
1. **操作方法**：按住KEY2键8秒后松开
2. **功能说明**：写入10,000条测试数据
3. **注意事项**：测试过程约30秒，请耐心等待

#### 6.3.3 Flash完全擦除（长按15秒）
1. **操作方法**：按住KEY2键15秒后松开
2. **功能说明**：清空所有历史数据
3. **警告**：此操作不可恢复，请谨慎使用

### 6.4 按键操作注意事项

#### 6.4.1 操作安全
- 按键操作期间屏幕会显示倒计时提示
- 危险操作需要更长时间确认
- 操作过程中可随时松开按键取消

#### 6.4.2 系统状态要求
- 部分功能需要在系统正常状态下才能使用
- 系统异常时某些按键功能可能不可用
- 重要操作会自动记录到日志中

---

## 7. 报警与故障处理

### 7.1 报警类型说明

系统共有15种异常类型，按优先级分为三类：

#### 7.1.1 高优先级报警（K~M类）
| 报警代码 | 报警内容 | 显示格式 | 处理建议 |
|----------|----------|----------|----------|
| K类异常 | NTC1温度过高 | K:NTC1 60.5C | 检查散热，降低环境温度 |
| L类异常 | NTC2温度过高 | L:NTC2 61.2C | 检查散热，降低环境温度 |
| M类异常 | NTC3温度过高 | M:NTC3 59.8C | 检查散热，降低环境温度 |

#### 7.1.2 中优先级报警（B~J类）
| 报警代码 | 报警内容 | 显示格式 | 处理建议 |
|----------|----------|----------|----------|
| B类异常 | K1_1继电器异常 | B:K1_1 STA异常 | 检查继电器1-1连接 |
| C类异常 | K2_1继电器异常 | C:K2_1 STA异常 | 检查继电器2-1连接 |
| D类异常 | K3_1继电器异常 | D:K3_1 STA异常 | 检查继电器3-1连接 |
| E类异常 | K1_2继电器异常 | E:K1_2 STA异常 | 检查继电器1-2连接 |
| F类异常 | K2_2继电器异常 | F:K2_2 STA异常 | 检查继电器2-2连接 |
| G类异常 | K3_2继电器异常 | G:K3_2 STA异常 | 检查继电器3-2连接 |
| H类异常 | SW1接触器异常 | H:SW1 STA异常 | 检查接触器1连接 |
| I类异常 | SW2接触器异常 | I:SW2 STA异常 | 检查接触器2连接 |
| J类异常 | SW3接触器异常 | J:SW3 STA异常 | 检查接触器3连接 |

#### 7.1.3 低优先级报警（A、N、O类）
| 报警代码 | 报警内容 | 显示格式 | 处理建议 |
|----------|----------|----------|----------|
| A类异常 | 使能信号冲突 | A:EN冲突 | 检查控制信号，确保只有一路使能 |
| N类异常 | 系统自检失败 | N:Step3 Fail | 系统将自动重启，如持续出现请检查硬件 |
| O类异常 | 外部电源异常 | O:DC_CTRL异常 | 检查24V电源供电状态 |

### 7.2 报警处理流程

#### 7.2.1 报警发生时
1. **显示屏提示**：上部区域显示报警信息
2. **报警指示**：ALARM指示灯亮起
3. **蜂鸣器响起**：发出报警声音（如有配置）
4. **日志记录**：自动记录报警事件

#### 7.2.2 报警处理步骤
1. **观察显示**：查看显示屏上的报警信息
2. **确认类型**：根据报警代码确认异常类型
3. **排查原因**：按照处理建议检查相关部件
4. **解决问题**：修复异常原因
5. **确认恢复**：观察报警是否消除

#### 7.2.3 报警恢复
- 异常原因消除后，报警会自动清除
- 显示屏恢复显示"System Normal"
- 系统记录异常恢复日志

### 7.3 特殊故障处理

#### 7.3.1 系统无法启动
**现象**：上电后显示屏不亮或显示异常
**可能原因**：
- 电源故障
- 硬件损坏
- 接线错误

**处理方法**：
1. 检查24V电源是否正常
2. 检查电源接线是否正确
3. 如问题持续，请联系技术支持

#### 7.3.2 自检反复失败
**现象**：系统反复重启，无法通过自检
**可能原因**：
- 继电器或接触器故障
- 反馈信号异常
- 温度传感器故障

**处理方法**：
1. 记录自检失败的具体步骤
2. 检查相关硬件连接
3. 如问题持续，请联系技术支持

#### 7.3.3 通道无法切换
**现象**：控制信号改变但通道状态不变
**可能原因**：
- 继电器故障
- 控制信号异常
- 系统处于报警状态

**处理方法**：
1. 检查是否有报警信息
2. 确认控制信号是否正确
3. 检查继电器工作状态

---

## 8. 日志查看功能

### 8.1 日志系统概述

#### 8.1.1 日志存储
- **存储容量**：16MB Flash，可存储约24万条日志
- **存储方式**：循环存储，满后自动覆盖最旧记录
- **数据保护**：断电数据不丢失

#### 8.1.2 日志内容
系统自动记录以下信息：
- 系统启动和关闭
- 通道切换操作
- 异常和报警事件
- 用户操作记录
- 系统状态变化

### 8.2 日志查看方法

#### 8.2.1 通过按键查看
1. **操作方法**：长按KEY1键3秒
2. **输出方式**：通过串口输出到调试终端
3. **波特率设置**：115200, 8, N, 1

#### 8.2.2 日志输出格式
```
=== 日志系统输出 ===
总日志数: 25 条
当前写入位置: 0x00100320
存储健康度: 100%
最后更新时间: 2025-01-07 14:25:30

--- 日志详情 ---
[1] 2025-01-07 14:20:15 | SYSTEM | CH0 | 系统启动
[2] 2025-01-07 14:20:15 | SAFETY | CH0 | 上电复位
[3] 2025-01-07 14:21:30 | SYSTEM | CH1 | 通道1开启
[4] 2025-01-07 14:22:45 | SYSTEM | CH1 | 通道1关闭
[5] 2025-01-07 14:22:47 | SYSTEM | CH2 | 通道2开启
[6] 2025-01-07 14:23:10 | SAFETY | CH2 | K类异常-NTC1温度过高
[7] 2025-01-07 14:23:15 | SAFETY | CH2 | K类异常已恢复
...
```

### 8.3 日志信息说明

#### 8.3.1 日志格式说明
每条日志包含以下信息：
- **序号**：日志条目编号
- **时间**：事件发生时间
- **类别**：SYSTEM（系统）、SAFETY（安全）、MONITOR（监控）
- **通道**：相关通道编号（CH0表示系统级事件）
- **内容**：事件描述

#### 8.3.2 常见日志类型
| 日志类型 | 示例内容 | 说明 |
|----------|----------|------|
| 系统启动 | 系统启动 | 设备上电启动 |
| 通道操作 | 通道1开启 | 通道切换操作 |
| 异常报警 | K类异常-NTC1温度过高 | 温度超限报警 |
| 异常恢复 | K类异常已恢复 | 异常状态恢复 |
| 用户操作 | 用户请求日志输出 | 按键操作记录 |

### 8.4 日志维护

#### 8.4.1 日志容量管理
- 系统自动管理日志容量
- 存储满时自动删除最旧记录
- 重要事件优先保留

#### 8.4.2 日志备份
建议定期备份重要日志：
1. 连接串口调试工具
2. 使用KEY1功能输出日志
3. 保存输出内容到文件

#### 8.4.3 日志清除
如需清除历史日志：
1. 长按KEY2键15秒执行Flash擦除
2. 注意：此操作不可恢复
3. 建议在专业人员指导下进行

---

## 9. 日常维护

### 9.1 维护周期

#### 9.1.1 日常检查（每日）
- 观察显示屏状态是否正常
- 检查是否有报警信息
- 确认通道切换功能正常

#### 9.1.2 定期检查（每周）
- 检查设备外观是否完好
- 清洁显示屏和按键
- 检查接线端子是否松动

#### 9.1.3 深度维护（每月）
- 检查所有接线连接
- 测试按键功能
- 查看历史日志记录
- 检查温度传感器工作状态

### 9.2 维护操作

#### 9.2.1 清洁保养
**清洁用品**：
- 干净的软布
- 无水酒精（99%）
- 防静电手套

**清洁步骤**：
1. 断开设备电源
2. 用软布清洁显示屏
3. 清洁按键和外壳
4. 检查接线端子无灰尘

#### 9.2.2 功能测试
**测试项目**：
- 显示屏显示是否正常
- 按键功能是否正常
- 通道切换是否正常
- 报警功能是否正常

**测试方法**：
1. 正常上电，观察自检过程
2. 测试KEY1和KEY2功能
3. 模拟通道切换操作
4. 检查温度显示是否正常

#### 9.2.3 数据备份
**备份内容**：
- 历史日志记录
- 系统配置参数
- 故障记录

**备份方法**：
1. 使用KEY1功能输出日志
2. 通过串口保存到电脑
3. 定期整理和分析日志

### 9.3 维护注意事项

#### 9.3.1 安全要求
- 维护前必须断开电源
- 高压部分由专业人员操作
- 使用防静电措施

#### 9.3.2 环境要求
- 保持环境清洁干燥
- 避免强磁场干扰
- 确保良好的散热条件

#### 9.3.3 记录管理
- 建立维护记录档案
- 记录维护时间和内容
- 保存重要的日志数据

---

## 10. 常见问题解答

### 10.1 启动问题

#### Q1：设备上电后显示屏不亮
**A1：** 
1. 检查24V电源是否正常供电
2. 检查电源接线是否正确
3. 检查保险丝是否熔断
4. 如问题持续，请联系技术支持

#### Q2：系统反复重启，无法正常工作
**A2：**
1. 观察自检过程，记录失败步骤
2. 检查继电器和接触器连接
3. 检查温度传感器是否正常
4. 如显示"N:Step3 Fail"，检查接触器反馈信号

#### Q3：自检时间过长
**A3：**
1. 正常自检时间约5-8秒
2. 如超过10秒，可能存在硬件问题
3. 记录自检卡住的具体步骤
4. 联系技术支持进行诊断

### 10.2 操作问题

#### Q4：通道无法切换
**A4：**
1. 检查K_EN控制信号是否正确
2. 确认系统没有报警信息
3. 检查继电器工作是否正常
4. 观察显示屏通道状态变化

#### Q5：按键无响应
**A5：**
1. 确认按键按压时间是否足够
2. 观察是否有按键提示信息
3. 检查系统是否处于正常状态
4. 如问题持续，可能是按键硬件故障

#### Q6：温度显示异常
**A6：**
1. 检查NTC传感器连接
2. 确认传感器规格是否正确（10KΩ）
3. 检查传感器是否损坏
4. 环境温度过高时数值会闪烁

### 10.3 报警问题

#### Q7：频繁出现A类异常（使能冲突）
**A7：**
1. 检查控制系统，确保只有一路K_EN信号有效
2. 检查K_EN信号线是否有短路
3. 确认控制逻辑是否正确
4. 可能需要调整控制程序

#### Q8：温度报警无法消除
**A8：**
1. 检查环境温度是否过高
2. 确认散热风扇是否正常工作
3. 检查设备通风是否良好
4. 可能需要改善散热条件

#### Q9：继电器状态异常报警
**A9：**
1. 检查继电器电源供电
2. 检查继电器状态反馈线路
3. 确认继电器是否损坏
4. 检查接线端子是否松动

### 10.4 维护问题

#### Q10：如何查看历史日志？
**A10：**
1. 长按KEY1键3秒
2. 连接串口调试工具（115200波特率）
3. 日志会自动输出到串口
4. 可保存输出内容到文件

#### Q11：Flash存储空间不足怎么办？
**A11：**
1. 系统会自动管理存储空间
2. 存储满时自动删除最旧记录
3. 如需清空：长按KEY2键15秒（谨慎操作）
4. 建议定期备份重要日志

#### Q12：设备需要多长时间维护一次？
**A12：**
1. 日常观察：每天检查显示状态
2. 定期清洁：每周清洁外观
3. 深度检查：每月检查接线和功能
4. 专业维护：每年请专业人员检查

### 10.5 技术支持

#### Q13：遇到无法解决的问题怎么办？
**A13：**
1. 记录问题现象和报警信息
2. 保存相关的日志记录
3. 联系技术支持热线
4. 提供设备型号和软件版本信息

#### Q14：设备保修期是多长？
**A14：**
1. 硬件保修期：1年
2. 软件支持：终身免费升级
3. 技术支持：7×24小时热线
4. 上门服务：根据合同约定

---

## ? 技术支持

**技术支持热线**：400-xxx-xxxx  
**技术支持邮箱**：support@company.com  
**在线技术支持**：www.company.com/support  
**工作时间**：周一至周五 9:00-18:00  

---

**? 2025 公司名称 版权所有**  
**未经许可，不得复制或传播本手册内容**
