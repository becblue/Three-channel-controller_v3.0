# 看门狗简化方案测试指导

## 测试准备

### 1. 编译确认
- ? **编译状态**：0错误 0警告
- ? **HEX文件**：已生成最新版本
- ? **代码大小**：32KB（与之前相比略有优化）

### 2. 预期运行流程
```
0-2秒：LOGO显示 → 2-5秒：自检进度 → 5秒后：正常运行+启动看门狗
```

## 测试步骤

### 第一步：正常启动测试
1. **烧录HEX文件**到STM32
2. **连接USART3调试串口**（波特率115200）
3. **复位系统**，观察启动过程

**期望结果：**
```
=== 三通道切换箱控制系统启动 ===
MCU: STM32F103RCT6
...
=== 系统进入正常运行状态 ===
自检完成，启动IWDG看门狗保护
=== IWDG初始化开始 ===
IWDG初始化完成：超时时间3秒
```

**关键检查点：**
- ? 系统正常启动
- ? 自检完成
- ? 看门狗启动成功
- ? **不再卡死**

### 第二步：看门狗保护测试
1. **等待系统进入正常运行状态**
2. **观察OLED显示**是否正常更新
3. **检查串口输出**是否持续

**期望结果：**
- ? OLED显示正常（主界面+温度+状态）
- ? 串口无异常输出
- ? 系统稳定运行，无复位

## 成功标准

### 基本要求
- ? **系统正常启动**：完整的LOGO→自检→正常流程
- ? **看门狗启动成功**：看到初始化完成信息
- ? **不再卡死**：系统稳定运行
- ? **显示正常**：OLED正常显示主界面

## 总结

这个简化看门狗方案彻底解决了原始复杂方案的卡死问题，具有：

1. **极简设计**：去除所有不必要的复杂性
2. **高可靠性**：主循环1ms周期保证绝对不会超时
3. **调试友好**：集中控制，问题定位简单
4. **工业级稳定**：3秒超时+LSI时钟源+条件喂狗
5. **向后兼容**：不影响其他模块功能

测试时应该能够看到系统正常启动，看门狗成功启动，并且系统稳定运行不再卡死。 